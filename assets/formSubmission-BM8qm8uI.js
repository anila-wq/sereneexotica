const a="https://apps.cratiocrm.com/Customize/Webhooks/webhook.php?id=312374",c="https://docs.google.com/forms/d/e/1FAIpQLSc4DVYaKTvX46uziCD2QlWDKEIBGVrVi0O_RPRI8LOOJBtIJg/formResponse";async function m(e){console.log("ğŸš€ FORM SUBMISSION STARTED"),console.log("ğŸ“ Received data:",e);try{const r=e.number||e.phone||"";if(console.log("ğŸ“ Phone number extracted:",r),!e.name||e.name.trim()==="")return console.error("âŒ Name is missing!"),{success:!1,message:"Name is required. Please fill in all fields."};if(!e.email||e.email.trim()==="")return console.error("âŒ Email is missing!"),{success:!1,message:"Email is required. Please fill in all fields."};if(!r||r.trim()==="")return console.error("âŒ Phone number is missing!",e),{success:!1,message:"Phone number is required. Please fill in all fields."};let s=r.trim();if(s=s.replace(/^\+91/,"").replace(/^91/,""),s=s.replace(/\D/g,""),s.length<10)return console.error("âŒ Phone number too short:",s),{success:!1,message:"Please enter a valid 10-digit phone number."};console.log("âœ… Formatted phone (digits only):",s),console.log("âœ… All validations passed");try{localStorage.setItem("thankYouName",e.name)}catch(o){console.warn("Could not save to localStorage:",o)}console.log("ğŸš€ Submitting to CRM webhook and Google Forms...");const t={id:"7312374",Client_Name:e.name.trim(),Mobile_Number:s,Email_Address:e.email.trim(),Project:"Serene Exotica"};console.log("ğŸ“¤ Sending webhook data (JSON):",t),console.log("ğŸ“¤ JSON stringified:",JSON.stringify(t));const i=fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),mode:"no-cors"}).then(o=>(console.log("âœ… Webhook submitted (no-cors mode)"),{service:"webhook",status:"submitted"})).catch(o=>(console.error("âš ï¸ Webhook error (continuing anyway):",o),{service:"webhook",error:o.message})),n=new URLSearchParams;n.append("entry.1501491234",e.name.trim()),n.append("entry.1434566618",s),n.append("entry.1598682861",e.email.trim());const l=fetch(c,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n.toString(),mode:"no-cors"}).then(o=>(console.log("âœ… Google Form submitted (no-cors mode)"),{service:"google",status:"submitted"})).catch(o=>(console.error("âš ï¸ Google Form error (continuing anyway):",o),{service:"google",error:o.message}));try{const o=await Promise.allSettled([i,l]);console.log("ğŸ“Š Submission results:",o)}catch(o){console.warn("âš ï¸ Some submissions may have failed, but continuing:",o)}return console.log("ğŸ‰ Navigating to thank you page"),window.location.hash="thankyou",console.log("âœ… FORM SUBMISSION COMPLETED SUCCESSFULLY"),{success:!0,message:"Thank you! Your request has been submitted successfully. Our team will contact you shortly."}}catch(r){return console.error("âŒ FORM SUBMISSION ERROR:",r),{success:!1,message:"There was an error submitting your request. Please try again or contact us directly at +91 97391 13345"}}}export{m as submitFormData};
